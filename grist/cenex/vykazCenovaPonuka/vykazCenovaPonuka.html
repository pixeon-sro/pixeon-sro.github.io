<!DOCTYPE html>
<html lang="sk">
  <head>
    <meta charset="utf-8">
    <title>Výkaz cenová ponuka</title>
    <link href="../css/style.css" rel="stylesheet" />
    <link href="../css/stylePrinter.css" rel="stylesheet" media="print" />
    <script src="https://docs.getgrist.com/grist-plugin-api.js"></script>
    <script src="cp.js"></script>
    <script src="cp-example.js"></script>
  </head>
  <body>  
    <pre id="myDisplay" style="background:red"></pre>
    
    <h1>Cenová ponuka</h1>
    <h2><strong>Dielo: </strong><span id="dielo"></span></h2>
    <h2><strong>Investor: </strong><span id="zakaznik"></span></h2>
    <h3>Kontaktné údaje</h3>
    <p>
      <strong>telefón: </strong><span id="telefon"></span><br/>
      <strong>e-mail: </strong><span id="mail"></span>
    </p>
    <p>
      <strong>Dátum vyhotovenia CP: </strong><span id="datumVytvorenia"></span><br/>
      <strong>Dátum platnosti CP: </strong><span id="datumPlatnosti"></span>
    </p>
    
    <h1>Výkaz Materiálu</h1>
    
    <table id="VykazVymerMaterial">
      <tr>
        <th>Etapa</th>
        <th>Materiál</th>
        <th>Jednotka</th>
        <th>Jednotková cena</th>
        <th>Množstvo</th>
        <th>Celková cena</th>
      </tr>
    </table>
    <!-- vynutene zalomenie strany pri tlaci  -->
    <div style="break-after:page"></div>
    
    <script>
      console.log("*** ver: 025")

      // pomocná funkcia na zobrazenie premenných pri vývoji
      
      let myDisplay = function(zobraz) {
        document.getElementById("myDisplay").innerText = zobraz;
      }

      function printTable(tableID, data) {
        let table = ""
        
        if (tableID === null) {
          console.log("Nie je určená cieľová tebulka")
        }
        else {
          table = document.getElementById(tableID)
        }
        data.forEach(function(row) {

          let tr = table.insertRow(-1)

          if (row.etapa) {
            let td1 = tr.insertCell(0)
            td1.innerHTML = row.etapa
          }
          if (row.material) {
            let td2 = tr.insertCell(1)
            td2.innerHTML = row.material
          }
          if (row.jednotka) {
            let td3 = tr.insertCell(2)
            td3.innerHTML = row.jednotka
          }
          if (row.jednotkova_cena) {
            let td4 = tr.insertCell(3)
            td4.innerHTML = row.jednotkova_cena
          }
          if (row.mnozstvo) {
            let td5 = tr.insertCell(4)
            td5.innerHTML = row.mnozstvo
          }
          if (row.celkova_cena) {
            let td6 = tr.insertCell(5)
            td6.innerHTML = row.celkova_cena.toFixed(2)
          }
        })
      }
      
      function cp(data) {
        
        
        // uvodne zobrazenie informacii o zakaznikovi
        document.getElementById("dielo").innerText=ref.Dielo
        document.getElementById("zakaznik").innerText=ref.Zakaznik
        document.getElementById("telefon").innerText=ref.Telefon
        document.getElementById("mail").innerText=ref.Mail
        //datum vytvorenia ponuky
        let datumVytvorenia = ref.Datum_vytvorenia_ponuky.toLocaleDateString('sk-SK')
        document.getElementById("datumVytvorenia").innerText=datumVytvorenia
        let datumPlatnosti = ref.Datum_platnosti_ponuky.toLocaleDateString('sk-SK')
        document.getElementById("datumPlatnosti").innerText=datumPlatnosti

       }


      
      
    </script>
    
    <button onclick="window.print()">Tlačiť</button>
  </body>
</html>
